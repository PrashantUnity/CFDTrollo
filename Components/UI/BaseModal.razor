@using CFDTrollo.Models

<div class="fixed inset-0 bg-black bg-opacity-50 modal-backdrop flex items-center justify-center z-50 p-4" 
     @onclick="OnBackdropClick" 
     @onkeydown="@(e => { if (e.Key == "Escape") OnClose.InvokeAsync(); })" 
     tabindex="0">
    <div class="modal-content bg-card rounded-xl w-full max-w-4xl max-h-[90vh] overflow-hidden shadow-2xl border border-border" 
         @onclick:stopPropagation="true">
        @ChildContent
    </div>
</div>

@code {
    [Parameter] public RenderFragment ChildContent { get; set; } = default!;
    [Parameter] public EventCallback OnClose { get; set; }
    [Parameter] public bool CloseOnBackdropClick { get; set; } = true;

    private async Task OnBackdropClick()
    {
        if (CloseOnBackdropClick)
        {
            await OnClose.InvokeAsync();
        }
    }
}
